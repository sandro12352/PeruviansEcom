<div class="container my-5">
    <a routerLink="/">regresar</a>
  <h2 class="mb-4">Mi Carrito</h2>

  <div *ngIf="productos.length > 0; else carritoVacio">
    <div class="row gy-4">
      <div class="col-md-12" *ngFor="let producto of productos">
        <div class="card shadow-sm p-3 d-flex flex-row align-items-center">
          <!-- Imagen -->
          <div class="me-3">
            <img [src]="producto.img" alt="{{ producto.titulo }}" class="img-thumbnail" style="width: 100px; height: auto;">
          </div>

          <!-- Información -->
          <div class="flex-grow-1">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <h5 class="mb-1" style="word-wrap: break-word; white-space: normal;">
                  {{ producto.titulo }}
                </h5>
                <small class="text-muted">{{ producto.tienda }}</small>
              </div>

              <!-- Botón eliminar -->
              <button type="button" class="btn p-0 border-0 bg-transparent"
                      (click)="eliminarProducto(producto)" aria-label="Eliminar producto">
                <i class="bi bi-trash3-fill fs-5 text-danger"></i>
              </button>
            </div>

            <!-- Precio y cantidad -->
            <div class="d-flex justify-content-between align-items-center mt-2">
              <span class="fw-semibold">S/ {{ producto.precio }}</span>

              <!-- Controles de cantidad -->
              <div style="display: flex; align-items: center;">
                <button class="btn btn-outline-secondary btn-sm" (click)="disminuirCantidad(producto)">-</button>
                <input type="number" [value]="producto.cantidad" min="1"
                       
                       class="form-control mx-2 text-center" style="width: 60px;">
                <button class="btn btn-outline-secondary btn-sm" (click)="aumentarCantidad(producto)">+</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Total y botón -->
    <div class="mt-4 d-flex justify-content-between align-items-center">
      <h4>Total: S/ {{ calcularTotal() }}</h4>
      <button class="btn btn-finalizar-compra">Finalizar compra</button>
    </div>
  </div>

  <!-- Carrito vacío -->
  <ng-template #carritoVacio>
    <div class="text-center">
      <i class="bi bi-cart-x fs-1 text-muted"></i>
      <p class="mt-3">Tu carrito está vacío.</p>
    </div>
  </ng-template>
</div>

