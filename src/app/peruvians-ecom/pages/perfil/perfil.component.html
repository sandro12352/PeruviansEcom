<div class="perfil-container">
  <div class="perfil-header">
    <h2>Mi Perfil</h2>
    <button 
      type="button" 
      class="btn-edit"
      (click)="toggleEdit()"
      [disabled]="loading">
      {{ isEditing ? '‚úï Cancelar' : ' Editar Perfil' }}
    </button>
  </div>

  <!-- Mensaje de estado -->
  <div *ngIf="message" class="alert" [ngClass]="{'alert-success': messageType === 'success', 'alert-error': messageType === 'error'}">
    {{ message }}
  </div>

  <!-- Loading spinner -->
  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner"></div>
    <p>Cargando informaci√≥n del perfil...</p>
  </div>

  <!-- Informaci√≥n del perfil -->
  <div class="perfil-card" *ngIf="!loading">
    <form [formGroup]="perfilForm" (ngSubmit)="onSubmit()">
      
      <!-- Secci√≥n: Informaci√≥n Personal -->
      <div class="card-section">
        <h3 class="section-title">Informaci√≥n Personal</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label> Email</label>
            <input 
              type="email" 
              [value]="cliente?.email || ''" 
              readonly 
              class="form-control readonly">
          </div>

          <div class="form-group">
            <label> DNI</label>
            <input 
              type="text" 
              [value]="cliente?.dni || ''" 
              readonly 
              class="form-control readonly">
          </div>
        </div>

        <div class="form-group">
          <label>Nombre Completo</label>
          <input 
            type="text" 
            [value]="cliente?.nombre || ''" 
            readonly 
            class="form-control readonly">
        </div>
      </div>

      <div class="section-divider"></div>

      <!-- Secci√≥n: Informaci√≥n de Contacto -->
      <div class="card-section">
        <h3 class="section-title">Informaci√≥n de Contacto</h3>
        
        <div class="form-group">
          <label for="telefono"> Tel√©fono</label>
          <input 
            type="text" 
            id="telefono"
            formControlName="telefono"
            class="form-control"
            [class.is-invalid]="telefono?.invalid && telefono?.touched"
            [readonly]="!isEditing"
            [class.readonly]="!isEditing"
            placeholder="Ejemplo: 987654321">
          <div *ngIf="telefono?.invalid && telefono?.touched" class="invalid-feedback">
            <div *ngIf="telefono?.errors?.['maxlength']">El tel√©fono no puede exceder 100 caracteres</div>
          </div>
        </div>

        <div class="form-group">
          <label for="direccion">Direcci√≥n</label>
          <textarea 
            id="direccion"
            formControlName="direccion"
            class="form-control"
            rows="3"
            [readonly]="!isEditing"
            [class.readonly]="!isEditing"
            placeholder="Ingresa tu direcci√≥n completa (Calle, n√∫mero, distrito, ciudad)"></textarea>
        </div>

        <!-- Botones de acci√≥n -->
        <div class="form-actions" *ngIf="isEditing">
          <button 
            type="submit" 
            class="btn btn-primary"
            [disabled]="loading || perfilForm.invalid">
            <span *ngIf="loading" class="spinner-sm"></span>
            {{ loading ? 'Guardando...' : 'Guardar Cambios' }}
          </button>
          <button 
            type="button" 
            class="btn btn-secondary"
            (click)="toggleEdit()"
            [disabled]="loading">
            ‚úï Cancelar
          </button>
        </div>
      </div>

    </form>
  </div>

  <!-- Informaci√≥n adicional -->
<!--   <div class="info-adicional" *ngIf="!loading && cliente">
    <h3>üìä Informaci√≥n de la Cuenta</h3>
    <div class="info-item">
      <strong>Tipo de cliente:</strong> 
      <span>{{ cliente.tipo === 'registrado' ? 'Cliente Registrado' : 'Cliente Invitado' }}</span>
    </div>
    <div class="info-item">
      <strong>Fecha de registro:</strong> 
      <span>{{ cliente.created_at | date:'dd/MM/yyyy - HH:mm' }}</span>
    </div>
    <div class="info-item">
      <strong>Estado de la cuenta:</strong> 
      <span style="color: #28a745; font-weight: 600;">‚úÖ Activa</span>
    </div>
  </div> -->
</div>