<section class="container my-5 p-0">
  <div [id]="carouselId" data-bs-touch="true" class="carousel slide" data-bs-interval="false" data-bs-ride="false">
    <div class="carousel-inner">
      <div
        class="carousel-item"
        *ngFor="let grupo of gruposProductos; let i = index"
        [class.active]="i === 0"
      >
        <div class="d-flex productos-slide">
          <div
            class="producto-card"
            *ngFor="let producto of grupo"
          >
            <!-- ACTUALIZADO: Pasar la ruta calculada a la card -->
            <app-card 
              [producto]="producto" 
              [rutaProducto]="generarRutaParaProducto(producto)">
            </app-card>  
          </div>
        </div>
      </div>
    </div>

    <!-- Controles del carrusel -->
    <button class="carousel-control-prev" 
            type="button" 
            [attr.data-bs-target]="'#' + carouselId" 
            data-bs-slide="prev"
            *ngIf="gruposProductos.length > 1">
      <span class="custom-arrow">
        <i class="bi bi-chevron-left"></i>
      </span>
    </button>

    <button class="carousel-control-next" 
            type="button" 
            [attr.data-bs-target]="'#' + carouselId" 
            data-bs-slide="next"
            *ngIf="gruposProductos.length > 1">
      <span class="custom-arrow">
        <i class="bi bi-chevron-right"></i>
      </span>
    </button>

    <!-- Indicadores del carrusel -->
    <div class="carousel-indicators" 
         *ngIf="gruposProductos.length > 1"
         style="position: relative; margin-top: 20px;">
      <button 
        type="button" 
        [attr.data-bs-target]="'#' + carouselId" 
        [attr.data-bs-slide-to]="i"
        *ngFor="let grupo of gruposProductos; let i = index"
        [class.active]="i === 0"
        [attr.aria-current]="i === 0 ? 'true' : null"
        [attr.aria-label]="'Slide ' + (i + 1)">
      </button>
    </div>
  </div>
</section>