<header class="fire-gradient shadow-sm">
  <div class="scroll">
    <div class="scroll-track">
      <!-- Repite suficientes veces para cubrir el ancho y duplica para el ciclo -->
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <!-- Duplicados para efecto infinito -->
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
      <div class="carrusel-item">üöö ENV√çOS GRATIS A TODO EL PER√ö &nbsp; ‚Ä¢ &nbsp;</div>
    </div>
  </div>

  <div class="px-1 py-1">
    <div class="d-flex align-items-center justify-content-evenly header-container">
      
      <!-- Logo y hamburguesa -->
      <!-- HEADER -->
      <div class="d-flex align-items-center">
        <button class="navbar-toggler d-md-none me-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasMenu"
          aria-controls="offcanvasMenu" aria-label="Toggle navigation">
          <i class="bi bi-list fs-1"></i>
        </button>
        
        <!-- √çcono de men√∫ (solo en escritorio) como dropdown -->
        <div class="dropdown d-none d-md-block">
          <button 
            class="nav-link btn btn-link p-0 d-flex align-items-center menu-icon me-3"
            id="menuDropdown"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            type="button">
            <i class="bi bi-list fs-2"></i>
            <span style="font-weight: 200px;font-size: 1.5rem;margin-left: 10px;">Men√∫</span>
          </button>

<!-- Actualizar la secci√≥n del dropdown del men√∫ -->
    <!-- Mega men√∫ de categor√≠as -->
<div class="dropdown-menu mega-menu p-4 border-0 shadow" 
     aria-labelledby="menuDropdown"
     (mouseleave)="ocultarSubcategorias()">

  <div class="container-fluid">
    <div class="row">
      <!-- Categor√≠as Padre -->
      <div class="col-12 col-md-4 border-end">
        <h2 class="fs-5 mb-3">Categor√≠as</h2>
        <ul class="list-unstyled">
          <li *ngFor="let categoria of categorias" 
              class="category-item d-flex justify-content-between align-items-center py-2 px-2 rounded"
              (mouseenter)="mostrarSubcategorias(categoria)"
              [ngClass]="{ 'active bg-light fw-bold': categoriaActiva?.id === categoria.id }">
            
            <span (click)="navegarACategoriaPadre(categoria)">
              {{ categoria.nombre | titlecase}}
            </span>
            
            <i class="bi bi-chevron-right ms-2 text-muted" 
               *ngIf="categoria.subcategorias?.length"></i>
          </li>
          <li *ngIf="categorias.length === 0" class="text-muted py-2">Cargando categor√≠as...</li>
        </ul>
      </div>

      <!-- Subcategor√≠as -->
      <div class="col-12 col-md-8 ps-md-4 ">
        <div *ngIf="categoriaActiva && subcategoriasActivas.length > 0">
          <h3 class="fs-6  fw-semibold mb-3">{{ categoriaActiva.nombre | titlecase}}</h3>
          <div class="row">
            <div *ngFor="let subcategoria of subcategoriasActivas" class="col-6 col-lg-4 mb-2">
              <a (click)="navegarACategoriaHijo(categoriaActiva, subcategoria)"
                 class="dropdown-item  subcategoria">
                {{ subcategoria.nombre }}
              </a>
            </div>
          </div>
        </div>
        <div *ngIf="!categoriaActiva" class="text-muted">
          <p class="mt-3">Selecciona una categor√≠a para ver sus opciones</p>
        </div>
      </div>
    </div>
  </div>
</div>

</div>
        
        <!-- Logo -->
        <a routerLink="/" >
          <img src="logo2.webp" loading="lazy" alt="Logo"  class="img-fluid h-100"  width="155">
        </a>       
      </div>

<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasMenu" aria-labelledby="offcanvasMenuLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasMenuLabel">Men√∫</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
  </div>
  <div class="offcanvas-body">
    <ul class="list-unstyled">
      <li>
        <a routerLink="/" data-bs-dismiss="offcanvas" 
           class="nav-link border-bottom d-flex justify-content-between align-items-center">
          INICIO<i class="bi bi-chevron-right text-success fs-2"></i>
        </a>
      </li>
      
      <!-- Categor√≠as din√°micas en men√∫ m√≥vil con subcategor√≠as -->
      <li *ngFor="let categoria of categorias">
        <!-- Si tiene subcategor√≠as, mostrar como acorde√≥n -->
        <div *ngIf="categoria.subcategorias?.length" 
             class="nav-link border-bottom d-flex justify-content-between align-items-center cursor-pointer"
             data-bs-toggle="collapse" 
             [attr.data-bs-target]="'#subcategorias-' + categoria.id">
          <span>{{ categoria.nombre.toUpperCase() }}</span>
          <i class="bi bi-chevron-down text-success fs-2"></i>
        </div>
        
        <!-- Si no tiene subcategor√≠as, enlace directo con nueva ruta -->
        <a *ngIf="!categoria.subcategorias?.length" 
           [routerLink]="['/categoria', generarSlugCategoria(categoria.nombre)]" 
           data-bs-dismiss="offcanvas" 
           class="nav-link border-bottom d-flex justify-content-between align-items-center">
          {{ categoria.nombre.toUpperCase() }}
          <i class="bi bi-chevron-right text-success fs-2"></i>
        </a>
        
        <!-- Subcategor√≠as -->
        <div *ngIf="categoria.subcategorias?.length" 
             class="collapse" 
             [id]="'subcategorias-' + categoria.id">
          <ul class="list-unstyled ps-3">
            <!-- Opci√≥n para ver toda la categor√≠a padre -->
            <li>
              <a [routerLink]="['/categoria', generarSlugCategoria(categoria.nombre)]" 
                 data-bs-dismiss="offcanvas" 
                 class="nav-link d-flex justify-content-between align-items-center fw-bold">
                Ver todos los {{ categoria.nombre }}
                <i class="bi bi-chevron-right text-success"></i>
              </a>
            </li>
            <!-- Subcategor√≠as individuales -->
            <li *ngFor="let subcategoria of categoria.subcategorias">
              <a [routerLink]="['/categoria', generarSlugCategoria(categoria.nombre), generarSlugCategoria(subcategoria.nombre)]" 
                 data-bs-dismiss="offcanvas" 
                 class="nav-link d-flex justify-content-between align-items-center">
                {{ subcategoria.nombre }}
                <i class="bi bi-chevron-right text-success"></i>
              </a>
            </li>
          </ul>
        </div>
      </li>
    </ul>
  </div>
</div>

      <!-- Barra de b√∫squeda -->
        <form class="d-none d-md-flex mx-4 w-50" (ngSubmit)="onSubmit()">
          <div class="input-group w-100 no-gap position-relative">
            <span class="search-icon-rounded">
              <i class="bi bi-search-heart fs-5" style="color: rgba(80, 17, 198, 0.383);"></i>
            </span>
            <input
              class="search-input"
              type="search"
              placeholder="¬øQu√© est√°s buscando hoy?"
              [(ngModel)]="terminoBusqueda"
              name="termino"
              (keyup)="buscar()" />
          </div>
        
        </form>

      <!-- √çconos -->
      <!-- Solo la secci√≥n del bot√≥n de usuario - reemplaza la parte correspondiente en tu header.component.html -->

<!-- Bot√≥n de ingresar / Usuario logueado -->
  <div class="d-flex align-items-center gap-4">
  
  <!-- Si no est√° autenticado -->
  <a 
    *ngIf="!isAuthenticated"
    routerLink="/auth" 
    class="d-flex align-items-center text-decoration-none text-white icon-hover">
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="40" height="40" x="0" y="0" viewBox="0 0 128 128" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M110.964 50.561a41.7 41.7 0 0 0-9.086-4.2c-3.26-1.192-6.34-2.319-8.575-4.337a7.857 7.857 0 0 1-2.383-4.328C87.126 18.219 81.1 5.25 64 5.25S40.873 18.22 37.08 37.692a7.857 7.857 0 0 1-2.38 4.327c-2.235 2.018-5.315 3.145-8.575 4.337a41.7 41.7 0 0 0-9.086 4.2C5.384 58.3 5.25 69.06 5.25 69.515a1.751 1.751 0 0 0 2.809 1.393c.071-.053 7.086-5.267 13.177-.251a17.264 17.264 0 0 1 4.4 6.075 23.207 23.207 0 0 0 2.88 4.645C23.079 99.016 17.08 106 17.021 106.066a1.751 1.751 0 0 0 1.91 2.8 27.851 27.851 0 0 1 25.469 4.921c9.029 7.036 13.242 8.963 19.6 8.963s10.569-1.927 19.6-8.963a27.853 27.853 0 0 1 25.467-4.918 1.75 1.75 0 0 0 1.916-2.8c-.061-.07-6.06-7.054-11.494-24.693a23.207 23.207 0 0 0 2.88-4.645 17.264 17.264 0 0 1 4.4-6.075c6.053-4.987 12.893.038 13.177.251a1.751 1.751 0 0 0 2.809-1.393c-.005-.454-.139-11.214-11.791-18.953zm-6.425 17.4a20.621 20.621 0 0 0-5.285 7.178c-.335.653-.67 1.284-1.022 1.9-1.372-5-2.584-10.336-3.593-15.958a1.751 1.751 0 0 0-3.446.619 179.425 179.425 0 0 0 4.649 19.742c0 .01.01.018.014.028 3.517 11.7 7.3 19.036 9.772 23.045a31.535 31.535 0 0 0-24.183 6.52c-8.957 6.973-12.357 8.215-17.445 8.215s-8.488-1.242-17.445-8.223a31.461 31.461 0 0 0-19.621-6.844 32.188 32.188 0 0 0-4.562.324c2.474-4.008 6.255-11.343 9.772-23.045 0-.01.011-.018.014-.028a179.654 179.654 0 0 0 4.649-19.742 1.751 1.751 0 0 0-3.446-.619 181.92 181.92 0 0 1-3.593 15.958 43.902 43.902 0 0 1-1.022-1.9 20.621 20.621 0 0 0-5.285-7.178c-4.845-3.992-10.345-3.321-14.174-1.723.9-3.309 3.292-8.509 9.685-12.755a38.929 38.929 0 0 1 8.353-3.834c3.588-1.314 6.978-2.554 9.718-5.028a11.38 11.38 0 0 0 3.473-6.254C44.72 16.775 51.085 8.75 64 8.75s19.278 8.025 23.484 29.611a11.383 11.383 0 0 0 3.473 6.255c2.74 2.474 6.13 3.714 9.718 5.028a38.929 38.929 0 0 1 8.353 3.834c6.395 4.246 8.789 9.448 9.686 12.756-3.832-1.601-9.33-2.271-14.175 1.722z" fill="#ffffff" opacity="1" data-original="#000000" class=""></path><path d="M64 43.272c-3.865 0-6.893 3.955-6.893 9s3.028 9 6.893 9 6.893-3.954 6.893-9-3.028-9-6.893-9zm0 14.5c-1.808 0-3.393-2.57-3.393-5.5s1.585-5.5 3.393-5.5 3.393 2.572 3.393 5.5-1.585 5.503-3.393 5.503zM49.6 42.643a3.667 3.667 0 0 0 1.035.139c2.8 0 6.612-2.607 8.473-4.732 1.9-2.173 2.5-4.4 1.664-6.266-1.481-3.328-5.891-3.518-9.61-2.228a7.112 7.112 0 0 0-4.587 5.244c-1.247 5.908 1.697 7.453 3.025 7.843zm.4-7.124a3.6 3.6 0 0 1 2.308-2.657c2.137-.742 4.762-.78 5.263.344.207.466-.1 1.293-.826 2.211-1.851 2.347-5.272 4.021-6.16 3.868-1.173-.345-.8-2.749-.585-3.766zM77.368 42.782a3.667 3.667 0 0 0 1.035-.139c1.324-.39 4.269-1.935 3.023-7.845a7.114 7.114 0 0 0-4.585-5.242c-3.718-1.288-8.128-1.1-9.61 2.228-.831 1.868-.24 4.093 1.663 6.266 1.862 2.125 5.675 4.732 8.474 4.732zm-6.939-9.576c.271-.608 1.165-.877 2.266-.877a9.509 9.509 0 0 1 3 .533A3.6 3.6 0 0 1 78 35.52c.214 1.016.587 3.42-.57 3.761-.888.174-4.323-1.515-6.176-3.864-.724-.917-1.032-1.745-.825-2.211zM53.6 78.639a1.747 1.747 0 0 0-1.983 1.48 68.58 68.58 0 0 1-5.595 19.242 1.75 1.75 0 0 0 3.119 1.59 70.776 70.776 0 0 0 5.939-20.33 1.747 1.747 0 0 0-1.48-1.982zM76.383 80.119a1.75 1.75 0 0 0-3.463.5 70.739 70.739 0 0 0 5.939 20.33 1.75 1.75 0 1 0 3.118-1.592 68.173 68.173 0 0 1-5.594-19.238z" fill="#ffffff" opacity="1" data-original="#000000" class=""></path></g></svg>
    <span class="fw-semibold ms-2">Ingresa</span>
  </a>
  <div *ngIf="isAuthenticated" class="dropdown">
  <button 
    class="d-flex align-items-center icon-hover btn btn-link p-0 text-white text-decoration-none"
    id="userDropdown"
    data-bs-toggle="dropdown"
    data-bs-auto-close="true"
    data-bs-display="static"
    aria-expanded="false"
    type="button">
    <i class="bi bi-person-circle fs-3 me-2"></i>
    <span class="fw-semibold user-name" [title]="clienteNombre || 'Usuario'">
      {{ getShortName() }}
    </span>
    <i class="bi bi-chevron-down ms-1"></i>
  </button>

  <ul class="dropdown-menu dropdown-menu-end shadow-sm border-0" aria-labelledby="userDropdown">
    <li>
      <a routerLink="perfil" class="dropdown-item py-2" data-bs-dismiss="dropdown">
        <i class="bi bi-person me-2"></i>
        <span>Mi Cuenta</span>
      </a>
    </li>
    <li>
      <a routerLink="mis-pedidos" class="dropdown-item py-2" data-bs-dismiss="dropdown">
        <i class="bi bi-bag me-2"></i>
        <span>Mis Pedidos</span>
      </a>
    </li>
    <li><hr class="dropdown-divider"></li>
    <li>
      <button class="dropdown-item py-2 text-danger border-0 bg-transparent w-100 text-start" (click)="logout()">
        <i class="bi bi-box-arrow-right me-2"></i>
        <span>Cerrar Sesi√≥n</span>
      </button>
    </li>
  </ul>
</div>

    <!-- Carrito (mantener como est√°) -->
    <a type="button" class="position-relative text-dark icon-hover" 
      data-bs-toggle="offcanvas" data-bs-target="#offcanvasCarrito" aria-controls="offcanvasCarrito">
      <div>
        
      </div>
      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="40" height="40" x="0" y="0" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M146.65 289.31h71.9a6.85 6.85 0 0 0 5.81-10.49l-36-57.38a6.85 6.85 0 0 0-11.61 0l-36 57.38a6.85 6.85 0 0 0 5.8 10.49zM182.6 238l23.58 37.63H159zm110.85 51.33h71.9a6.85 6.85 0 0 0 5.8-10.49l-35.95-57.4a6.85 6.85 0 0 0-11.61 0l-35.95 57.38a6.85 6.85 0 0 0 5.81 10.49zM329.4 238l23.6 37.61h-47.18zm53.7 74.68a6.85 6.85 0 0 0-6.43-1 327.62 327.62 0 0 1-50 13.09 6.83 6.83 0 0 0-5.38 4.94l-8.49 31.15-12.42-1.22-2.22-23.92a6.86 6.86 0 0 0-7.41-6.19 410.1 410.1 0 0 1-69.56 0 6.85 6.85 0 0 0-7.41 6.19l-2.22 23.92-12.42 1.22-8.49-31.15a6.83 6.83 0 0 0-5.38-4.94 327.62 327.62 0 0 1-50-13.09 6.85 6.85 0 0 0-9.11 7C131 386.4 188 439.44 255.94 439.44s124.94-53 129.78-120.76a6.85 6.85 0 0 0-2.62-6.02zM256 425.66c-57.27 0-105.85-42.12-114.9-97.66a347.49 347.49 0 0 0 37.49 9.42l8.88 32.58a6.84 6.84 0 0 0 7.28 5l23.81-2.34a6.84 6.84 0 0 0 6.15-6.18l2.12-22.83a423.83 423.83 0 0 0 58.34 0l2.12 22.83a6.84 6.84 0 0 0 6.15 6.18l23.81 2.34a6.87 6.87 0 0 0 7.28-5l8.88-32.59A347.49 347.49 0 0 0 370.9 328c-9.05 55.54-57.63 97.66-114.9 97.66zm218.28-235.34c-23.54-36.44-55.15-56.51-89-56.51a30.43 30.43 0 0 0-18.69 6.5 59.34 59.34 0 0 0-26.6-6.5c-11.84 0-23.55 3.77-34.52 11-5.85-5.11-16.85-17-16.85-34.37 0-24.64 35.71-68.74 70.86-68.74a6.85 6.85 0 0 0 6.77-5.79c.09-.56 2.07-13.95-6.18-24.41C354.72 4.73 346.64.87 336.05 0a6.87 6.87 0 0 0-3 .45c-1 .4-25.11 10-51.11 32.8-23.69 20.81-53.33 57-61.22 111.6q-3 2.87-5.81 6.21c-13.26-11.32-28-17.27-42.85-17.27a59.34 59.34 0 0 0-26.6 6.5 30.44 30.44 0 0 0-18.71-6.5c-33.84 0-65.45 20.07-89 56.51-22.97 35.54-35.6 82.62-35.6 132.61 0 49.23 12.55 90.56 36.31 119.51 21.74 26.51 52.25 41.37 86.12 42.12 16.66 14.81 36.83 22.46 60.13 22.46a128.51 128.51 0 0 0 40.95-6.65C235.18 508 245.41 512 256 512s20.82-4 30.34-11.69a128.51 128.51 0 0 0 41 6.65c23.3 0 43.47-7.61 60.13-22.42 33.87-.75 64.38-15.61 86.12-42.12 23.76-28.95 36.31-70.28 36.31-119.51-.05-49.99-12.68-97.07-35.62-132.59zM290.57 43.9a186.08 186.08 0 0 1 46-30.06c5.77.72 10 2.76 12.68 6.06a17.19 17.19 0 0 1 3.38 8.51c-40.95 4.94-77.71 52.64-77.71 82a54.9 54.9 0 0 0 7 26.74c-8.23-5.53-16.93-8.4-25.89-8.4a43.84 43.84 0 0 0-19.3 4.59c7.76-34.66 25.82-64.7 53.84-89.44zm110.61 425.72c12-15.66 21.52-36.09 28.35-61.15a6.85 6.85 0 0 0-13.22-3.6c-16 58.65-45.94 88.39-89 88.39a115.28 115.28 0 0 1-29.88-3.9c7.39-8.78 14.18-20 20.17-33.49a6.85 6.85 0 0 0-12.52-5.56c-13.55 30.5-31.43 48-49.06 48s-35.51-17.49-49.06-48a6.85 6.85 0 1 0-12.52 5.56c6 13.49 12.78 24.71 20.17 33.49a115.28 115.28 0 0 1-29.88 3.9c-43.08 0-73-29.74-89-88.39a6.85 6.85 0 1 0-13.22 3.6c6.83 25.06 16.36 45.49 28.35 61.15-57.45-9-95-65.69-95-146.71 0-96.72 49.73-175.4 110.85-175.4a17 17 0 0 1 5.73 1C111.5 164.86 93.88 194 82.9 232.21a6.86 6.86 0 0 0 4.69 8.48 7 7 0 0 0 1.9.27 6.86 6.86 0 0 0 6.58-5c15.66-54.57 44.76-88.48 76-88.48 12 0 23.65 4.92 34.66 14.6a159.92 159.92 0 0 0-12.26 22.79 6.85 6.85 0 0 0 12.52 5.56c13.55-30.5 31.43-48 49.06-48s35.51 17.49 49.06 48a6.85 6.85 0 0 0 12.52-5.56 159.92 159.92 0 0 0-12.26-22.79c11-9.68 22.65-14.6 34.66-14.6 31.19 0 60.29 33.91 75.95 88.48a6.86 6.86 0 0 0 6.58 5 7 7 0 0 0 1.9-.27 6.86 6.86 0 0 0 4.69-8.48c-11-38.25-28.6-67.35-49.53-83.66a17 17 0 0 1 5.72-1c61.13 0 110.86 78.68 110.86 175.4-.05 80.98-37.57 137.64-95.02 146.67z" fill="#ffffff" opacity="1" data-original="#000000" class=""></path></g></svg>
      <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-dark">
        {{ cartCount }}
        <span class="visually-hidden">productos en el carrito</span>
      </span>
    </a>
  </div>

      <!-- Offcanvas del carrito -->
      <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasCarrito" #offcanvasRef aria-labelledby="offcanvasCarritoLabel" style="width: 530px;">
        <div class="offcanvas-header">
          <h5 id="offcanvasCarritoLabel">Carrito</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
        </div>

        <!-- Contenedor con scroll -->
        <div class="offcanvas-body p-0 d-flex flex-column justify-content-between" *ngIf="productosEnCarrito.length > 0; else carritoVacio">
          <div class="overflow-auto px-3 py-2">
            <div *ngFor="let producto of productosEnCarrito" class="mb-3 border rounded p-2 position-relative">
              
              <div class="d-flex gap-3">
                <!-- Imagen -->
                <div style="width: 120px; height: 120px; flex-shrink: 0;">
                  <img [src]="producto.img" class="img-fluid rounded" alt="producto" style="object-fit: cover; width: 100%; height: 100%;">
                </div>

                <!-- Informaci√≥n -->
                <div class="flex-grow-1">
                  <div class="d-flex justify-content-between align-items-start gap-2">
                    <div class="flex-grow-1">
                      <div class="producto-titulo">
                        {{ producto.titulo }}
                      </div>
                      <small class="text-muted">{{ producto.tienda }}</small>
                    </div>
                    <div class="cursor-pointer">
                      <button type="button" class="btn p-0 border-0 bg-transparent" (click)="eliminarProducto(producto)" aria-label="Eliminar producto">
                        <i class="bi bi-trash3-fill fs-5 text-danger"></i>
                      </button>
                    </div>
                  </div>

                  <!-- Contador de cantidad -->
                  <div class="cantidad-box d-flex align-items-center justify-content-between my-1 px-2 py-1">
                    <button class="cantidad-btn" (click)="disminuirCantidad(producto)">‚àí</button>
                    <span>{{ producto.cantidad }}</span>
                    <button class="cantidad-btn" (click)="aumentarCantidad(producto)">+</button>
                  </div>

                  S/. {{ producto.precio | number:'1.2-2' }}<br>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Resumen fijo abajo -->
          <div class="resumen-footer border-top bg-white p-3">
            <div class="d-flex justify-content-between">
              <span>Subtotal:</span>
              <span>S/. {{ calcularSubtotal() | number:'1.2-2' }}</span>
            </div>
            <div class="d-flex justify-content-between">
              <span>Descuento:</span>
              <span>S/. {{ calcularDescuento() | number:'1.2-2' }}</span>
            </div>
            <hr class="my-2">
            <div class="d-flex justify-content-between fw-bold">
              <span>Total:</span>
              <span>S/. {{ calcularTotal() | number:'1.2-2' }}</span>
            </div>
            <div class="d-grid mt-3">
              <button class="btn btn-finalizar-compra" (click)="irACheckout()">
                üõí Finalizar compra
              </button>
            </div>
          </div>
        </div>

        <ng-template #carritoVacio>
          <div class="d-flex flex-column justify-content-center align-items-center" style="height: 100%;">
            <i class="bi bi-cart-x fs-1 text-muted"></i>
            <p class="mt-3 text-muted fs-5">No tiene productos agregados en el carrito.</p>
          </div>
        </ng-template>
      </div>
    </div>
  </div>

  <!-- Navbar secundaria -->
  <nav class="navbar navbar-expand-md chicha-navbar-minimal shadow-sm" style="background: #fff;">
    <div class="container-fluid">
      <div class="collapse navbar-collapse justify-content-center" id="mainNavbar">
        <ul class="navbar-nav flex-row gap-4 d-none d-md-flex align-items-center">
          <li class="nav-item">
            <a [routerLink]="['mas-vendidos']" class="nav-link">
              <strong>M√ÅS VENDIDO</strong>
            </a>
          </li>
          <li class="nav-item">
            <a [routerLink]="['mas-nuevos']" class="nav-link">
              <strong>NOVEDADES</strong>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="blog" class="nav-link">
              <strong>BLOG</strong>
            </a>
          </li>
          <li class="nav-item">
            <a [routerLink]="['ofertas']" class="nav-link">
              <strong>PROMOCIONES</strong>
            </a>
          </li>
          <li class="nav-item">
            <a [routerLink]="['contactanos']" class="nav-link">
              <strong>CONT√ÅCTANOS</strong>
            </a>
          </li>
        </ul>
      </div>

      <!-- B√∫squeda en m√≥vil -->
    <form class="d-md-none w-100 mt-3" (ngSubmit)="onSubmit()">
      <div class="input-group w-100 no-gap position-relative">
        <span class="search-icon-rounded">
          <i class="bi bi-search-heart fs-5" style="color: rgba(80, 17, 198, 0.383);"></i>
        </span>
        <input
          class="search-input"
          type="search"
          placeholder="¬øQu√© est√°s buscando hoy?"
          [(ngModel)]="terminoBusqueda"
          name="termino"
          (keyup)="buscar()" />
      </div>
    
    </form>
      
    </div>
  </nav>
</header>