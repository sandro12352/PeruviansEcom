<ng-container *ngIf="producto as p">
  <div class="card">
    <span class="descuento-badge" *ngIf="p.descuento && p.descuento !== '0%'">
      -{{ p.descuento }}
    </span>

    <!-- Imagen -->
    <div class="card-img-wrapper" [routerLink]="rutaProducto" style="cursor: pointer;">
      <img [src]="p.img" alt="Producto" loading="lazy" />
    </div>

    <!-- Contenido -->
    <div class="card-body-custom">
      <div>
        <span class="marca-badge">{{ p.tienda }}</span>
        <h6 class="fw-bold">{{ p.titulo }}</h6>

        <s class="text-body-tertiary" *ngIf="p.descuento && p.descuento !== '0%'">
          S/.{{ p.precio | number:'1.2-2' }}
        </s>

        <p class="fw-semibold mb-2"
           [class.text-danger]="p.descuento && p.descuento !== '0%'"
           [class.text-dark]="!p.descuento || p.descuento === '0%'">
          S/.{{ (p.descuento && p.descuento !== '0%') ? (p.precio_despues | number:'1.2-2') : (p.precio | number:'1.2-2') }}
        </p>

        <div class="d-flex flex-column gap-1 info-envio">
          <div class="d-flex align-items-center text-secondary small">
            <i class="bi bi-truck me-1"></i>
            <span>Delivery</span>
          </div>
          <div class="d-flex align-items-center text-secondary small">
            <i class="bi bi-geo-alt me-1"></i>
            <span>Provincia</span>
          </div>
        </div>
      </div>
    </div>

    <!-- BotÃ³n -->
    <div class="p-2 mt-auto">
      <button class="btn boton-agregar btn-sm p-2 w-100"
              data-bs-toggle="offcanvas"
              data-bs-target="#offcanvasCarrito"
              aria-controls="offcanvasCarrito"
              (click)="AgregarCarrito(); $event.stopPropagation()">
        AGREGAR
      </button>
    </div>
  </div>
</ng-container>
